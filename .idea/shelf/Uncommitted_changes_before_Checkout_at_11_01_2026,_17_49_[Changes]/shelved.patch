Index: src/hardware/camera_worker.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+># src/hardware/camera_worker.py\nimport time\nimport signal\nimport os\nimport queue\nimport cv2\nimport numpy as np\nfrom loguru import logger as log\n\n# Core\nfrom src.core.processor import Processor\nfrom src.core.event_bus import EventBus\nfrom src.core.config import settings\n\n# Data & Memory\nfrom src.data.models import SharedMemoryConfig\nfrom src.data.shared_memory import SharedMemoryManager, VideoFrameLayout, RingBufferLayout\n# [FIX] –î–æ–±–∞–≤–∏–ª–∏ PluginCommand –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –≤ Processor\nfrom src.data.schemas import CameraConfig, PluginCommand\n\n# Hardware\nfrom src.hardware.webcam import Webcam\n\n\ndef run_camera_worker(camera_id: int, shm_config: SharedMemoryConfig, bus: EventBus):\n    \"\"\"\n    –ü—Ä–æ—Ü–µ—Å—Å –∫–∞–º–µ—Ä—ã (CameraWorker).\n    –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Processor –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥ –ø–ª–∞–≥–∏–Ω–∞–º.\n    \"\"\"\n\n    # === 0. Setup Process ===\n    log.info(f\"\uD83D\uDE80 CameraWorker-{camera_id} starting (PID: {os.getpid()})...\")\n\n    should_run = True\n\n    def stop_handler(signum, frame):\n        nonlocal should_run\n        should_run = False\n\n    signal.signal(signal.SIGTERM, stop_handler)\n    signal.signal(signal.SIGINT, stop_handler)\n\n    # === 1. Init Resources ===\n\n    # Initialize variables to ensure safe cleanup\n    webcam = None\n    shm = None\n    processor = None\n\n    # A. Queue\n    try:\n        command_queue = bus._command_queues[camera_id]\n    except (AttributeError, KeyError):\n        log.critical(\"‚ùå No command queue!\")\n        return\n\n    # B. Webcam\n    try:\n        webcam = Webcam(\n            device_id=settings.CAMERA_INDEX + camera_id,\n            width=settings.CAMERA_WIDTH,\n            height=settings.CAMERA_HEIGHT,\n            fps=settings.CAMERA_FPS\n        )\n\n        if not webcam.connect():\n            log.error(\"‚ùå Camera connect fail\")\n            return\n    except Exception as e:\n        log.error(f\"‚ùå Webcam Init Error: {e}\")\n        return\n\n    # C. Shared Memory\n    try:\n        shm = SharedMemoryManager(config=shm_config, create=True)\n        shm_buf = shm.shm.buf\n        log.info(f\"\uD83D\uDCBE SHM Allocated: {shm.size} bytes ({shm.capacity} slots)\")\n    except Exception as e:\n        log.error(f\"‚ùå SHM Init Error: {e}\")\n        if webcam: webcam.release()\n        return\n\n    # D. Processor & Config\n    try:\n        processor = Processor(bus, camera_id)\n        current_config = CameraConfig(camera_id=camera_id)\n        webcam.apply_config(current_config)\n    except Exception as e:\n        log.error(f\"‚ùå Processor Init Error: {e}\")\n        shm.close()\n        webcam.release()\n        return\n\n    # Runtime vars\n    frame_idx = 0\n    math_salt = 1.0\n    last_heartbeat = time.time()\n    TARGET_W = settings.CAMERA_WIDTH\n    TARGET_H = settings.CAMERA_HEIGHT\n\n    log.success(f\"\uD83C\uDFA5 CameraWorker-{camera_id} ready. Loop running.\")\n\n    # === 3. Main Loop ===\n    try:\n        while should_run:\n            iter_start = time.perf_counter()\n\n            # --- PHASE 1: Commands (Control Plane) ---\n            while not command_queue.empty():\n                try:\n                    cmd_packet = command_queue.get_nowait()\n\n                    # 1. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –∫–æ–º–∞–Ω–¥—ã\n                    target = None\n                    cmd = None\n                    args = {}\n\n                    if isinstance(cmd_packet, dict):\n                        target = cmd_packet.get(\"target\")\n                        # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ payload (–µ—Å–ª–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞)\n                        cmd = cmd_packet.get(\"cmd\") or cmd_packet.get(\"payload\", {}).get(\"cmd\")\n                        args = cmd_packet.get(\"args\") or cmd_packet.get(\"payload\", {}).get(\"args\", {})\n                    else:\n                        # –ï—Å–ª–∏ —ç—Ç–æ –æ–±—ä–µ–∫—Ç\n                        target = getattr(cmd_packet, \"target\", None)\n                        cmd = getattr(cmd_packet, \"cmd\", None)\n                        args = getattr(cmd_packet, \"args\", {})\n\n                    if not cmd:\n                        continue\n\n                    # 2. –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –í–æ—Ä–∫–µ—Ä)\n                    if cmd == \"SET_CONFIG\":\n                        cfg_dict = current_config.model_dump()\n                        cfg_dict.update(args)\n                        current_config = CameraConfig(**cfg_dict)\n                        webcam.apply_config(current_config)\n                        # log.info(f\"‚öô\uFE0F Config updated: {args}\")\n\n                    elif cmd == \"SET_SALT\":\n                        math_salt = float(args.get(\"salt\", 1.0))\n\n                    # 3. –ö–æ–º–∞–Ω–¥—ã –ü–ª–∞–≥–∏–Ω–∞–º (–î–µ–ª–µ–≥–∏—Ä—É–µ–º –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—É)\n                    else:\n                        # –£–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –≤ PluginCommand –∏ –æ—Ç–¥–∞–µ–º –º–æ–∑–≥—É\n                        # Processor —Å–∞–º –Ω–∞–π–¥–µ—Ç –Ω—É–∂–Ω—É—é —Å—Ç–∞–¥–∏—é –ø–æ target\n                        plugin_cmd = PluginCommand(\n                            target=target if target else \"broadcast\",\n                            cmd=cmd,\n                            args=args\n                        )\n                        processor.handle_command(plugin_cmd)\n\n                except queue.Empty:\n                    break\n                except Exception as e:\n                    log.error(f\"Command Error: {e}\")\n\n            # --- PHASE 2: Capture ---\n            ret, frame = webcam.read_frame()\n            if not ret or frame is None:\n                time.sleep(0.01)\n                continue\n\n            timestamp = time.perf_counter()\n\n            # Resize Guard\n            h, w = frame.shape[:2]\n            if w != TARGET_W or h != TARGET_H:\n                frame = cv2.resize(frame, (TARGET_W, TARGET_H))\n\n            if len(frame.shape) == 2:\n                frame = cv2.cvtColor(frame, cv2.COLOR_GRAY2BGR)\n\n            # --- PHASE 3: Write SHM ---\n            try:\n                head_idx = RingBufferLayout.get_write_index(shm_buf)\n                # shm.capacity —Ç–µ–ø–µ—Ä—å –±–µ—Ä–µ—Ç—Å—è –∏–∑ settings, —Ç–∞–∫ —á—Ç–æ –≤—Å—ë –±–µ–∑–æ–ø–∞—Å–Ω–æ\n                next_idx = (head_idx + 1) % shm.capacity\n\n                slot_view = RingBufferLayout.get_slot_view(shm_buf, next_idx, shm.slot_size)\n\n                VideoFrameLayout.write_to_buf(\n                    slot_view, frame, frame_idx, timestamp, math_salt, 0\n                )\n                RingBufferLayout.update_write_index(shm_buf, next_idx)\n            except Exception as e:\n                log.error(f\"SHM Write Error: {e}\")\n\n            # --- PHASE 4: Processing ---\n            try:\n                processor.process_frame(frame, frame_idx, current_config)\n            except Exception as e:\n                # [FIX] Log exact pipeline error\n                log.error(f\"Pipeline Error: {e}\")\n\n            # --- PHASE 5: Heartbeat ---\n            if time.time() - last_heartbeat > 1.0:\n                bus.publish_event(\"heartbeat\", {\"camera_id\": camera_id, \"pid\": os.getpid()})\n                last_heartbeat = time.time()\n\n            frame_idx += 1\n\n    except Exception as e:\n        log.critical(f\"CameraWorker Main Loop Crash: {e}\")\n\n    finally:\n        # === Cleanup ===\n        log.info(f\"\uD83D\uDED1 CameraWorker-{camera_id} cleanup...\")\n\n        if webcam:\n            try:\n                webcam.release()\n                log.info(\"\uD83D\uDCF7 Webcam released\")\n            except Exception as e:\n                log.error(f\"Webcam Release Error: {e}\")\n\n        if shm:\n            try:\n                # [FIX] Use close(), NEVER call unlink() on the manager directly\n                # Manager.close() handles unlinking internally if is_owner=True\n                shm.close()\n                log.info(\"\uD83D\uDCBE SHM closed\")\n            except Exception as e:\n                log.error(f\"SHM Cleanup Error: {e}\")\n\n        log.info(f\"\uD83D\uDC4B CameraWorker-{camera_id} finished.\")
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/hardware/camera_worker.py b/src/hardware/camera_worker.py
--- a/src/hardware/camera_worker.py	
+++ b/src/hardware/camera_worker.py	
@@ -75,6 +75,20 @@
         shm = SharedMemoryManager(config=shm_config, create=True)
         shm_buf = shm.shm.buf
         log.info(f"üíæ SHM Allocated: {shm.size} bytes ({shm.capacity} slots)")
+
+        # [FIX] ARCHITECTURE: Explicit Handshake with Server
+        # –°–æ–æ–±—â–∞–µ–º —Å–µ—Ä–≤–µ—Ä—É, —á—Ç–æ –ø–∞–º—è—Ç—å –≥–æ—Ç–æ–≤–∞ –∏ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å (–¥–∞–∂–µ –µ—Å–ª–∏ –∏–º—è —Ç–æ –∂–µ, —ç—Ç–æ –Ω–æ–≤–∞—è –∞–ª–ª–æ–∫–∞—Ü–∏—è)
+        handshake_payload = {
+            "camera_id": camera_id,
+            "shm_name": shm_config.name,
+            "shape": shm_config.shape,
+            "dtype": shm_config.dtype,
+            "timestamp": time.time()
+        }
+        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ. Server.py (websocket loop) –ø–æ–π–º–∞–µ—Ç –µ–≥–æ –∏ –æ–±–Ω–æ–≤–∏—Ç video_managers.
+        bus.publish_event("shm_handshake", handshake_payload)
+        log.info(f"ü§ù Handshake sent for {shm_config.name}")
+
     except Exception as e:
         log.error(f"‚ùå SHM Init Error: {e}")
         if webcam: webcam.release()
@@ -104,6 +118,7 @@
     try:
         while should_run:
             iter_start = time.perf_counter()
+            slot_view = None  # [FIX] Init scope variable for cleanup
 
             # --- PHASE 1: Commands (Control Plane) ---
             while not command_queue.empty():
@@ -178,6 +193,7 @@
                 # shm.capacity —Ç–µ–ø–µ—Ä—å –±–µ—Ä–µ—Ç—Å—è –∏–∑ settings, —Ç–∞–∫ —á—Ç–æ –≤—Å—ë –±–µ–∑–æ–ø–∞—Å–Ω–æ
                 next_idx = (head_idx + 1) % shm.capacity
 
+                # [FIX] –ü–æ–ª—É—á–∞–µ–º view, –ø–∏—à–µ–º, –∏ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —É–¥–∞–ª—è–µ–º view
                 slot_view = RingBufferLayout.get_slot_view(shm_buf, next_idx, shm.slot_size)
 
                 VideoFrameLayout.write_to_buf(
@@ -186,6 +202,12 @@
                 RingBufferLayout.update_write_index(shm_buf, next_idx)
             except Exception as e:
                 log.error(f"SHM Write Error: {e}")
+            finally:
+                # [FIX] CRITICAL: Release the memory view immediately!
+                # –ò–Ω–∞—á–µ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Ü–∏–∫–ª–µ –∏–ª–∏ –≤—ã—Ö–æ–¥–µ –±—É–¥–µ—Ç BufferError
+                if slot_view is not None:
+                    del slot_view
+                    slot_view = None
 
             # --- PHASE 4: Processing ---
             try:
@@ -217,7 +239,10 @@
 
         if shm:
             try:
-                # [FIX] Use close(), NEVER call unlink() on the manager directly
+                # [FIX] Extra safety: Force garbage collection of any lingering views
+                import gc
+                gc.collect()
+
                 # Manager.close() handles unlinking internally if is_owner=True
                 shm.close()
                 log.info("üíæ SHM closed")
Index: src/data/shared_memory.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import struct\nimport time\nimport numpy as np\nfrom multiprocessing import shared_memory\nfrom typing import Tuple, Optional\nfrom loguru import logger\n\n# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥–µ–ª–∏\nfrom src.data.models import SharedMemoryConfig\n# [FIX] –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏\nfrom src.core.config import settings\n\n\nclass VideoFrameLayout:\n    \"\"\"\n    –£–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç–æ–º –û–î–ù–û–ì–û —Å–ª–æ—Ç–∞ –∫–∞–¥—Ä–∞ (Secure Protocol v2.1).\n    Structure:\n    [ Header (24 bytes) | Pixels (...) ]\n\n    Header Format ('qdfBH'):\n      - q: frame_id   (int64, 8 bytes)\n      - d: timestamp  (double, 8 bytes)\n      - f: math_salt  (float, 4 bytes)\n      - B: flags      (uint8, 1 byte)\n      - H: reserved   (uint16, 2 bytes)\n    \"\"\"\n    _HEADER_FORMAT = 'qdfBH'\n    HEADER_SIZE = struct.calcsize(_HEADER_FORMAT)\n\n    @classmethod\n    def get_slot_size(cls, shape: Tuple[int, ...], dtype='uint8') -> int:\n        pixel_bytes = np.prod(shape) * np.dtype(dtype).itemsize\n        return cls.HEADER_SIZE + int(pixel_bytes)\n\n    @classmethod\n    def write_to_buf(cls, buffer_view: memoryview,\n                     frame: np.ndarray,\n                     frame_id: int,\n                     timestamp: float,\n                     math_salt: float = 1.0,\n                     flags: int = 0):\n        \"\"\"\n        –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∫–∞–¥—Ä –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.\n        \"\"\"\n        # 1. –ü–∏—à–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫\n        struct.pack_into(cls._HEADER_FORMAT, buffer_view, 0,\n                         frame_id, timestamp, math_salt, flags, 0)\n\n        # 2. –ü–∏—à–µ–º –ø–∏–∫—Å–µ–ª–∏\n        body_view = buffer_view[cls.HEADER_SIZE:]\n        dst_arr = np.ndarray(frame.shape, dtype=frame.dtype, buffer=body_view)\n        dst_arr[:] = frame[:]\n\n    @classmethod\n    def parse_from_buf(cls, buffer_view: memoryview, shape: Tuple[int, ...], dtype='uint8'):\n        \"\"\"\n        –ß–∏—Ç–∞–µ—Ç –∫–∞–¥—Ä –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∫–æ—Ä—Ç–µ–∂ –¥–∞–Ω–Ω—ã—Ö.\n        \"\"\"\n        frame_id, ts, salt, flags, _ = struct.unpack_from(cls._HEADER_FORMAT, buffer_view, 0)\n        image_view = np.ndarray(shape, dtype=dtype, buffer=buffer_view[cls.HEADER_SIZE:])\n\n        return frame_id, ts, salt, flags, image_view\n\n\nclass RingBufferLayout:\n    \"\"\"\n    –£–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –í–°–ï–ì–û –∫–æ–ª—å—Ü–∞.\n    Structure: [ WriteIndex (4b) | Capacity (4b) | ... Slots ... ]\n    \"\"\"\n    _GLOBAL_HEADER_FMT = 'II'\n    GLOBAL_HEADER_SIZE = struct.calcsize(_GLOBAL_HEADER_FMT)\n\n    @classmethod\n    def calc_total_size(cls, shape: Tuple[int, ...], dtype='uint8', capacity: int = 3) -> int:\n        slot_size = VideoFrameLayout.get_slot_size(shape, dtype)\n        return cls.GLOBAL_HEADER_SIZE + (slot_size * capacity)\n\n    @classmethod\n    def init_header(cls, shm_buf: memoryview, capacity: int):\n        struct.pack_into(cls._GLOBAL_HEADER_FMT, shm_buf, 0, 0, capacity)\n\n    @classmethod\n    def get_write_index(cls, shm_buf: memoryview) -> int:\n        idx, _ = struct.unpack_from(cls._GLOBAL_HEADER_FMT, shm_buf, 0)\n        return idx\n\n    @classmethod\n    def update_write_index(cls, shm_buf: memoryview, new_index: int):\n        _, cap = struct.unpack_from(cls._GLOBAL_HEADER_FMT, shm_buf, 0)\n        struct.pack_into(cls._GLOBAL_HEADER_FMT, shm_buf, 0, new_index, cap)\n\n    @classmethod\n    def get_slot_view(cls, shm_buf: memoryview, slot_index: int, slot_size: int) -> memoryview:\n        offset = cls.GLOBAL_HEADER_SIZE + (slot_index * slot_size)\n        return shm_buf[offset: offset + slot_size]\n\n\nclass SharedMemoryManager:\n    def __init__(\n            self,\n            config: SharedMemoryConfig,\n            create: bool = True\n    ):\n        self.name = config.name\n        self.shape = config.shape\n        self.dtype = config.dtype\n\n        # [FIX] –ë–µ—Ä–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞, –∞ –Ω–µ –∏–∑ –æ–±—ä–µ–∫—Ç–∞ –º–æ–¥–µ–ª–∏\n        self.capacity = settings.SHM_BUFFER_COUNT\n\n        self.is_owner = create\n\n        # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ 6 —Å–ª–æ—Ç–æ–≤ (–∏–ª–∏ —Å–∫–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ)\n        self.size = RingBufferLayout.calc_total_size(self.shape, self.dtype, self.capacity)\n        self.shm: Optional[shared_memory.SharedMemory] = None\n        self.slot_size = VideoFrameLayout.get_slot_size(self.shape, self.dtype)\n\n        if self.is_owner:\n            self._allocate()\n        else:\n            self._attach()\n\n    def _allocate(self):\n        # –û—á–∏—Å—Ç–∫–∞ –º—É—Å–æ—Ä–∞\n        try:\n            temp = shared_memory.SharedMemory(name=self.name)\n            temp.unlink()\n            temp.close()\n        except FileNotFoundError:\n            pass\n\n        try:\n            self.shm = shared_memory.SharedMemory(name=self.name, create=True, size=self.size)\n            RingBufferLayout.init_header(self.shm.buf, self.capacity)\n            logger.info(f\"\uD83D\uDCBE SecureSHM Created: {self.name} | {self.size / 1024 / 1024:.2f} MB | {self.capacity} slots\")\n        except Exception as e:\n            logger.critical(f\"Failed to create SHM {self.name}: {e}\")\n            raise\n\n    def _attach(self):\n        try:\n            self.shm = shared_memory.SharedMemory(name=self.name, create=False)\n            _, real_cap = struct.unpack_from(RingBufferLayout._GLOBAL_HEADER_FMT, self.shm.buf, 0)\n            self.capacity = real_cap\n        except FileNotFoundError:\n            logger.error(f\"‚ùå SHM {self.name} not found.\")\n            raise\n\n    def close(self):\n        if self.shm:\n            try:\n                self.shm.close()\n            except:\n                pass\n            if self.is_owner:\n                try:\n                    self.shm.unlink()\n                    logger.info(f\"\uD83D\uDDD1\uFE0F SHM Unlinked: {self.name}\")\n                except:\n                    pass\n\n    def __enter__(self):\n        return self\n\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        self.close()
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/data/shared_memory.py b/src/data/shared_memory.py
--- a/src/data/shared_memory.py	
+++ b/src/data/shared_memory.py	
@@ -1,6 +1,8 @@
+# src/data/shared_memory.py
 import struct
 import time
 import numpy as np
+import gc
 from multiprocessing import shared_memory
 from typing import Tuple, Optional
 from loguru import logger
@@ -104,6 +106,8 @@
         self.name = config.name
         self.shape = config.shape
         self.dtype = config.dtype
+        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ñ–∏–≥, —á—Ç–æ–±—ã —Å–µ—Ä–≤–µ—Ä –º–æ–≥ —á–∏—Ç–∞—Ç—å –∏–∑ –Ω–µ–≥–æ –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ
+        self.shm_config = config
 
         # [FIX] –ë–µ—Ä–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞, –∞ –Ω–µ –∏–∑ –æ–±—ä–µ–∫—Ç–∞ –º–æ–¥–µ–ª–∏
         self.capacity = settings.SHM_BUFFER_COUNT
@@ -128,6 +132,8 @@
             temp.close()
         except FileNotFoundError:
             pass
+        except Exception as e:
+            logger.warning(f"Allocation Cleanup Warning: {e}")
 
         try:
             self.shm = shared_memory.SharedMemory(name=self.name, create=True, size=self.size)
@@ -149,15 +155,20 @@
     def close(self):
         if self.shm:
             try:
+                # [FIX] Force Close underlying mmap before unlink
+                # –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å BufferError –µ—Å–ª–∏ –µ—Å—Ç—å –≤–∏—Å—è—á–∏–µ —Å—Å—ã–ª–∫–∏
                 self.shm.close()
-            except:
-                pass
+            except Exception as e:
+                logger.debug(f"SHM Close debug: {e}")
+
             if self.is_owner:
                 try:
                     self.shm.unlink()
                     logger.info(f"üóëÔ∏è SHM Unlinked: {self.name}")
-                except:
+                except FileNotFoundError:
                     pass
+                except Exception as e:
+                    logger.warning(f"SHM Unlink error: {e}")
 
     def __enter__(self):
         return self
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project version=\"4\">\n  <component name=\"AutoImportSettings\">\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\n  </component>\n  <component name=\"ChangeListManager\">\n    <list default=\"true\" id=\"dfcb042d-d8b2-4f4a-bb45-e8687a4852d0\" name=\"Changes\" comment=\"\">\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/frontend/src/widgets/GeometryWidget.jsx\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/frontend/src/widgets/GeometryWidget.jsx\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/frontend/src/widgets/registry.js\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/frontend/src/widgets/registry.js\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/src/plugins/geometry_manager.py\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/plugins/geometry_manager.py\" afterDir=\"false\" />\n    </list>\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\n  </component>\n  <component name=\"FileTemplateManagerImpl\">\n    <option name=\"RECENT_TEMPLATES\">\n      <list>\n        <option value=\"Python Script\" />\n      </list>\n    </option>\n  </component>\n  <component name=\"FlaskConsoleOptions\" custom-start-script=\"import sys&#10;sys.path.extend([WORKING_DIR_AND_PYTHON_PATHS])&#10;from flask.cli import ScriptInfo&#10;locals().update(ScriptInfo(create_app=None).load_app().make_shell_context())&#10;print(&quot;Python %s on %s\\nApp: %s [%s]\\nInstance: %s&quot; % (sys.version, sys.platform, app.import_name, app.env, app.instance_path))\">\n    <envs>\n      <env key=\"FLASK_APP\" value=\"app\" />\n    </envs>\n    <option name=\"myCustomStartScript\" value=\"import sys&#10;sys.path.extend([WORKING_DIR_AND_PYTHON_PATHS])&#10;from flask.cli import ScriptInfo&#10;locals().update(ScriptInfo(create_app=None).load_app().make_shell_context())&#10;print(&quot;Python %s on %s\\nApp: %s [%s]\\nInstance: %s&quot; % (sys.version, sys.platform, app.import_name, app.env, app.instance_path))\" />\n    <option name=\"myEnvs\">\n      <map>\n        <entry key=\"FLASK_APP\" value=\"app\" />\n      </map>\n    </option>\n  </component>\n  <component name=\"Git.Settings\">\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\n      <map>\n        <entry key=\"$PROJECT_DIR$\" value=\"camera-reconnection\" />\n      </map>\n    </option>\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\n    <option name=\"RESET_MODE\" value=\"HARD\" />\n  </component>\n  <component name=\"ProblemsViewState\">\n    <option name=\"selectedTabId\" value=\"CurrentFile\" />\n  </component>\n  <component name=\"ProjectColorInfo\">{\n  &quot;associatedIndex&quot;: 6\n}</component>\n  <component name=\"ProjectId\" id=\"37LMAW3zZ6Eauc0WLq4mZ9N0f3Q\" />\n  <component name=\"ProjectViewState\">\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\n    <option name=\"showLibraryContents\" value=\"true\" />\n  </component>\n  <component name=\"PropertiesComponent\">{\n  &quot;keyToString&quot;: {\n    &quot;Node.js.CameraControl.js.executor&quot;: &quot;Run&quot;,\n    &quot;Python.__main__.executor&quot;: &quot;Run&quot;,\n    &quot;Python.ble-controller.executor&quot;: &quot;Run&quot;,\n    &quot;Python.calc_lines.executor&quot;: &quot;Run&quot;,\n    &quot;Python.cam_exposure.executor&quot;: &quot;Run&quot;,\n    &quot;Python.check_camera_control.executor&quot;: &quot;Run&quot;,\n    &quot;Python.control.executor&quot;: &quot;Run&quot;,\n    &quot;Python.controller.executor&quot;: &quot;Run&quot;,\n    &quot;Python.count_lines.executor&quot;: &quot;Run&quot;,\n    &quot;Python.dev_runner.executor&quot;: &quot;Run&quot;,\n    &quot;Python.generate_board.executor&quot;: &quot;Run&quot;,\n    &quot;Python.mac_native.executor&quot;: &quot;Run&quot;,\n    &quot;Python.main.executor&quot;: &quot;Run&quot;,\n    &quot;Python.src.main.executor&quot;: &quot;Run&quot;,\n    &quot;Python.tree.executor&quot;: &quot;Run&quot;,\n    &quot;Python.webcam.executor&quot;: &quot;Run&quot;,\n    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,\n    &quot;git-widget-placeholder&quot;: &quot;develop&quot;,\n    &quot;last_opened_file_path&quot;: &quot;/Users/nikfrants/Documents/it/BikeFit/config&quot;,\n    &quot;node.js.detected.package.eslint&quot;: &quot;true&quot;,\n    &quot;node.js.detected.package.tslint&quot;: &quot;true&quot;,\n    &quot;node.js.selected.package.eslint&quot;: &quot;(autodetect)&quot;,\n    &quot;node.js.selected.package.tslint&quot;: &quot;(autodetect)&quot;,\n    &quot;nodejs_package_manager_path&quot;: &quot;npm&quot;,\n    &quot;npm.start.executor&quot;: &quot;Run&quot;,\n    &quot;settings.editor.selected.configurable&quot;: &quot;preferences.editor&quot;,\n    &quot;ts.external.directory.path&quot;: &quot;/Applications/PyCharm.app/Contents/plugins/javascript-plugin/jsLanguageServicesImpl/external&quot;,\n    &quot;vue.rearranger.settings.migration&quot;: &quot;true&quot;\n  }\n}</component>\n  <component name=\"RecentsManager\">\n    <key name=\"CopyFile.RECENT_KEYS\">\n      <recent name=\"$PROJECT_DIR$/config\" />\n    </key>\n    <key name=\"MoveFile.RECENT_KEYS\">\n      <recent name=\"$PROJECT_DIR$/src/plugins/.disabled\" />\n      <recent name=\"$PROJECT_DIR$/src/plugins/disabled\" />\n      <recent name=\"$PROJECT_DIR$/frontend/src/widgets/disabled\" />\n      <recent name=\"$PROJECT_DIR$/src/plugins\" />\n      <recent name=\"$PROJECT_DIR$/src/stages\" />\n    </key>\n  </component>\n  <component name=\"RunManager\" selected=\"Python.dev_runner\">\n    <configuration name=\"count_lines new\" type=\"PythonConfigurationType\" factoryName=\"Python\" temporary=\"true\">\n      <module name=\"BikeFit\" />\n      <option name=\"ENV_FILES\" value=\"\" />\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\n      <option name=\"PARENT_ENVS\" value=\"true\" />\n      <envs>\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\n      </envs>\n      <option name=\"SDK_HOME\" value=\"\" />\n      <option name=\"WORKING_DIRECTORY\" value=\"$PROJECT_DIR$/tools\" />\n      <option name=\"IS_MODULE_SDK\" value=\"true\" />\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\n      <EXTENSION ID=\"PythonCoverageRunConfigurationExtension\" runner=\"coverage.py\" />\n      <option name=\"SCRIPT_NAME\" value=\"$PROJECT_DIR$/tools/count_lines.py\" />\n      <option name=\"PARAMETERS\" value=\"$PROJECT_DIR$ py js jsx --exclude-dir node_modules logs docs uvc-util --exclude-file package-lock.json --exclude-pattern *_init_* --changes --only-changed --min-width 30\" />\n      <option name=\"SHOW_COMMAND_LINE\" value=\"false\" />\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\n      <option name=\"MODULE_MODE\" value=\"false\" />\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\n      <option name=\"INPUT_FILE\" value=\"\" />\n      <method v=\"2\" />\n    </configuration>\n    <configuration name=\"count_lines\" type=\"PythonConfigurationType\" factoryName=\"Python\">\n      <module name=\"BikeFit\" />\n      <option name=\"ENV_FILES\" value=\"\" />\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\n      <option name=\"PARENT_ENVS\" value=\"true\" />\n      <envs>\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\n      </envs>\n      <option name=\"SDK_HOME\" value=\"\" />\n      <option name=\"SDK_NAME\" value=\"Python 3.10 (BikeFit)\" />\n      <option name=\"WORKING_DIRECTORY\" value=\"$PROJECT_DIR$/tools\" />\n      <option name=\"IS_MODULE_SDK\" value=\"false\" />\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\n      <EXTENSION ID=\"PythonCoverageRunConfigurationExtension\" runner=\"coverage.py\" />\n      <option name=\"SCRIPT_NAME\" value=\"$PROJECT_DIR$/tools/count_lines.py\" />\n      <option name=\"PARAMETERS\" value=\"$PROJECT_DIR$ py js jsx --exclude-dir node_modules logs docs uvc-util --exclude-file package-lock.json --exclude-pattern *_init_* --changes --min-width 30\" />\n      <option name=\"SHOW_COMMAND_LINE\" value=\"false\" />\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\n      <option name=\"MODULE_MODE\" value=\"false\" />\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\n      <option name=\"INPUT_FILE\" value=\"\" />\n      <method v=\"2\" />\n    </configuration>\n    <configuration name=\"dev_runner\" type=\"PythonConfigurationType\" factoryName=\"Python\" nameIsGenerated=\"true\">\n      <module name=\"BikeFit\" />\n      <option name=\"ENV_FILES\" value=\"\" />\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\n      <option name=\"PARENT_ENVS\" value=\"true\" />\n      <envs>\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\n      </envs>\n      <option name=\"SDK_HOME\" value=\"\" />\n      <option name=\"SDK_NAME\" value=\"Python 3.10 (BikeFit)\" />\n      <option name=\"WORKING_DIRECTORY\" value=\"\" />\n      <option name=\"IS_MODULE_SDK\" value=\"false\" />\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\n      <EXTENSION ID=\"PythonCoverageRunConfigurationExtension\" runner=\"coverage.py\" />\n      <option name=\"SCRIPT_NAME\" value=\"$PROJECT_DIR$/dev_runner.py\" />\n      <option name=\"PARAMETERS\" value=\"\" />\n      <option name=\"SHOW_COMMAND_LINE\" value=\"false\" />\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\n      <option name=\"MODULE_MODE\" value=\"false\" />\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\n      <option name=\"INPUT_FILE\" value=\"\" />\n      <method v=\"2\" />\n    </configuration>\n    <configuration name=\"src.main\" type=\"PythonConfigurationType\" factoryName=\"Python\">\n      <module name=\"BikeFit\" />\n      <option name=\"ENV_FILES\" value=\"\" />\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\n      <option name=\"PARENT_ENVS\" value=\"true\" />\n      <envs>\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\n      </envs>\n      <option name=\"SDK_HOME\" value=\"\" />\n      <option name=\"SDK_NAME\" value=\"Python 3.10 (BikeFit)\" />\n      <option name=\"WORKING_DIRECTORY\" value=\"\" />\n      <option name=\"IS_MODULE_SDK\" value=\"false\" />\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\n      <EXTENSION ID=\"PythonCoverageRunConfigurationExtension\" runner=\"coverage.py\" />\n      <option name=\"SCRIPT_NAME\" value=\"src.main\" />\n      <option name=\"PARAMETERS\" value=\"\" />\n      <option name=\"SHOW_COMMAND_LINE\" value=\"false\" />\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\n      <option name=\"MODULE_MODE\" value=\"true\" />\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\n      <option name=\"INPUT_FILE\" value=\"\" />\n      <method v=\"2\" />\n    </configuration>\n    <configuration name=\"tree\" type=\"PythonConfigurationType\" factoryName=\"Python\">\n      <module name=\"BikeFit\" />\n      <option name=\"ENV_FILES\" value=\"\" />\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\n      <option name=\"PARENT_ENVS\" value=\"true\" />\n      <envs>\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\n      </envs>\n      <option name=\"SDK_HOME\" value=\"\" />\n      <option name=\"WORKING_DIRECTORY\" value=\"$PROJECT_DIR$/tools\" />\n      <option name=\"IS_MODULE_SDK\" value=\"true\" />\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\n      <EXTENSION ID=\"PythonCoverageRunConfigurationExtension\" runner=\"coverage.py\" />\n      <option name=\"SCRIPT_NAME\" value=\"$PROJECT_DIR$/tools/tree.py\" />\n      <option name=\"PARAMETERS\" value=\"$PROJECT_DIR$ py js jsx --exclude-dir node_modules logs docs uvc-util --exclude-file package-lock.json --exclude-pattern *_init_*\" />\n      <option name=\"SHOW_COMMAND_LINE\" value=\"false\" />\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\n      <option name=\"MODULE_MODE\" value=\"false\" />\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\n      <option name=\"INPUT_FILE\" value=\"\" />\n      <method v=\"2\" />\n    </configuration>\n    <list>\n      <item itemvalue=\"Python.dev_runner\" />\n      <item itemvalue=\"Python.src.main\" />\n      <item itemvalue=\"Python.count_lines\" />\n      <item itemvalue=\"Python.tree\" />\n      <item itemvalue=\"Python.count_lines new\" />\n    </list>\n    <recent_temporary>\n      <list>\n        <item itemvalue=\"Python.count_lines new\" />\n        <item itemvalue=\"Python.count_lines new\" />\n        <item itemvalue=\"Python.count_lines new\" />\n        <item itemvalue=\"Python.count_lines new\" />\n      </list>\n    </recent_temporary>\n  </component>\n  <component name=\"SharedIndexes\">\n    <attachedChunks>\n      <set>\n        <option value=\"bundled-js-predefined-1d06a55b98c1-0b3e54e931b4-JavaScript-PY-241.19416.19\" />\n        <option value=\"bundled-python-sdk-337b0a7a993a-2767605e8bc2-com.jetbrains.pycharm.pro.sharedIndexes.bundled-PY-241.19416.19\" />\n      </set>\n    </attachedChunks>\n  </component>\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\n  <component name=\"TaskManager\">\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\n      <changelist id=\"dfcb042d-d8b2-4f4a-bb45-e8687a4852d0\" name=\"Changes\" comment=\"\" />\n      <created>1766677756173</created>\n      <option name=\"number\" value=\"Default\" />\n      <option name=\"presentableId\" value=\"Default\" />\n      <updated>1766677756173</updated>\n      <workItem from=\"1766677757096\" duration=\"4334000\" />\n      <workItem from=\"1766782260761\" duration=\"19432000\" />\n      <workItem from=\"1766876708815\" duration=\"34000\" />\n      <workItem from=\"1766876894989\" duration=\"1671000\" />\n      <workItem from=\"1766948855713\" duration=\"1828000\" />\n      <workItem from=\"1767003273608\" duration=\"34508000\" />\n      <workItem from=\"1767048284830\" duration=\"8241000\" />\n      <workItem from=\"1767119990481\" duration=\"19000\" />\n      <workItem from=\"1767192084883\" duration=\"23541000\" />\n      <workItem from=\"1767456597528\" duration=\"54754000\" />\n      <workItem from=\"1767605268294\" duration=\"11970000\" />\n      <workItem from=\"1767646010798\" duration=\"636000\" />\n      <workItem from=\"1767703401275\" duration=\"15948000\" />\n      <workItem from=\"1767777218680\" duration=\"28000\" />\n      <workItem from=\"1767777251823\" duration=\"12000000\" />\n      <workItem from=\"1767795907325\" duration=\"9519000\" />\n      <workItem from=\"1768047876552\" duration=\"2378000\" />\n    </task>\n    <task id=\"LOCAL-00001\" summary=\"+ camera reconnects&#10;- cpu loads up to 100%\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1768089511142</created>\n      <option name=\"number\" value=\"00001\" />\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1768089511142</updated>\n    </task>\n    <option name=\"localTasksCounter\" value=\"2\" />\n    <servers />\n  </component>\n  <component name=\"TypeScriptGeneratedFilesManager\">\n    <option name=\"version\" value=\"3\" />\n  </component>\n  <component name=\"Vcs.Log.Tabs.Properties\">\n    <option name=\"TAB_STATES\">\n      <map>\n        <entry key=\"MAIN\">\n          <value>\n            <State>\n              <option name=\"COLUMN_ID_WIDTH\">\n                <map>\n                  <entry key=\"Table.Default.Author.ColumnIdWidth\" value=\"109\" />\n                  <entry key=\"Table.Default.Date.ColumnIdWidth\" value=\"98\" />\n                  <entry key=\"Table.GitHub.CommitStatus.ColumnIdWidth\" value=\"56\" />\n                </map>\n              </option>\n            </State>\n          </value>\n        </entry>\n      </map>\n    </option>\n  </component>\n  <component name=\"VcsManagerConfiguration\">\n    <MESSAGE value=\"+ camera reconnects&#10;- cpu loads up to 100%\" />\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"+ camera reconnects&#10;- cpu loads up to 100%\" />\n    <option name=\"GROUP_MULTIFILE_MERGE_BY_DIRECTORY\" value=\"true\" />\n  </component>\n  <component name=\"com.intellij.coverage.CoverageDataManagerImpl\">\n    <SUITE FILE_PATH=\"coverage/BikeFit$camera_inspector.coverage\" NAME=\"camera_inspector Coverage Results\" MODIFIED=\"1766879265769\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/src/tools\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$count_lines2.coverage\" NAME=\"count_lines2 Coverage Results\" MODIFIED=\"1767723080943\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/tools\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$check_camera_control.coverage\" NAME=\"check_camera_control Coverage Results\" MODIFIED=\"1767747353499\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/tools\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$dev_runner.coverage\" NAME=\"dev_runner Coverage Results\" MODIFIED=\"1768140551237\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$control.coverage\" NAME=\"control Coverage Results\" MODIFIED=\"1767367754097\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/sensors/accelerometer\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$src_main.coverage\" NAME=\"src.main Coverage Results\" MODIFIED=\"1766787006373\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$ble_controller.coverage\" NAME=\"ble-controller Coverage Results\" MODIFIED=\"1767375252758\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/src/hardware\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$webcam.coverage\" NAME=\"webcam Coverage Results\" MODIFIED=\"1766839890416\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/src/hardware\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$generate_board.coverage\" NAME=\"generate_board Coverage Results\" MODIFIED=\"1767609098179\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/tools\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$calc_lines.coverage\" NAME=\"count_lines Coverage Results\" MODIFIED=\"1767575532027\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/tools\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$mac_native.coverage\" NAME=\"mac_native Coverage Results\" MODIFIED=\"1767367704285\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/sensors/accelerometer\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$count_lines.coverage\" NAME=\"count_lines Coverage Results\" MODIFIED=\"1767883881730\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/tools\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$tree.coverage\" NAME=\"tree Coverage Results\" MODIFIED=\"1767883939828\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/tools\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$__main__.coverage\" NAME=\"src.main Coverage Results\" MODIFIED=\"1766679268325\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$controller.coverage\" NAME=\"controller Coverage Results\" MODIFIED=\"1767369827823\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/sensors/accelerometer\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$main.coverage\" NAME=\"main Coverage Results\" MODIFIED=\"1767036200328\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/src\" />\n    <SUITE FILE_PATH=\"coverage/BikeFit$cam_exposure.coverage\" NAME=\"cam_exposure Coverage Results\" MODIFIED=\"1767477071358\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/tools\" />\n  </component>\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	
+++ b/.idea/workspace.xml	
@@ -6,9 +6,6 @@
   <component name="ChangeListManager">
     <list default="true" id="dfcb042d-d8b2-4f4a-bb45-e8687a4852d0" name="Changes" comment="">
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/frontend/src/widgets/GeometryWidget.jsx" beforeDir="false" afterPath="$PROJECT_DIR$/frontend/src/widgets/GeometryWidget.jsx" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/frontend/src/widgets/registry.js" beforeDir="false" afterPath="$PROJECT_DIR$/frontend/src/widgets/registry.js" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/plugins/geometry_manager.py" beforeDir="false" afterPath="$PROJECT_DIR$/src/plugins/geometry_manager.py" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -308,7 +305,7 @@
     <SUITE FILE_PATH="coverage/BikeFit$camera_inspector.coverage" NAME="camera_inspector Coverage Results" MODIFIED="1766879265769" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$/src/tools" />
     <SUITE FILE_PATH="coverage/BikeFit$count_lines2.coverage" NAME="count_lines2 Coverage Results" MODIFIED="1767723080943" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$/tools" />
     <SUITE FILE_PATH="coverage/BikeFit$check_camera_control.coverage" NAME="check_camera_control Coverage Results" MODIFIED="1767747353499" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$/tools" />
-    <SUITE FILE_PATH="coverage/BikeFit$dev_runner.coverage" NAME="dev_runner Coverage Results" MODIFIED="1768140551237" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="" />
+    <SUITE FILE_PATH="coverage/BikeFit$dev_runner.coverage" NAME="dev_runner Coverage Results" MODIFIED="1768141084338" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="" />
     <SUITE FILE_PATH="coverage/BikeFit$control.coverage" NAME="control Coverage Results" MODIFIED="1767367754097" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$/sensors/accelerometer" />
     <SUITE FILE_PATH="coverage/BikeFit$src_main.coverage" NAME="src.main Coverage Results" MODIFIED="1766787006373" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="" />
     <SUITE FILE_PATH="coverage/BikeFit$ble_controller.coverage" NAME="ble-controller Coverage Results" MODIFIED="1767375252758" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$/src/hardware" />
