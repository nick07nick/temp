# BikeFit
High-precision measurement and tracking of human movements in real time
### Система анализа движений человека в реальном времени

---

#### **Общее назначение**

Проект представляет собой программно-аппаратный комплекс для высокоточного трекинга движений человека в реальном времени. Основная цель — обеспечить анализ биомеханики (углы суставов, траектории конечностей, симметрия движений) с точностью до **3 мм**, что актуально для:

- Спортивной аналитики (например, для велоспорта, бега, силовых тренировок).  
- Медицинской реабилитации (оценка восстановления после травм).  
- Виртуальной и дополненной реальности (анимация аватаров в реальном времени).

---

#### **Механизм работы**

1. **Сбор данных**:  
   - **3 высокоскоростные камеры** (90+ FPS, разрешение 2K) фиксируют движения человека, на теле которого закреплены **кастомные датчики-маркеры** (разработаны и настроены вручную).  
   - Камеры синхронизированы для одновременной записи с разных ракурсов.  
2. **Обработка видео (Backend, Python)**:

   **OpenCV**:

   - Преобразование кадров в градации серого для выделения маркеров.  
     - Детекция координат маркеров на каждом кадре с субпиксельной точностью.

     **TensorFlow**:

     - Первичное сопоставление маркеров с анатомическими точками (например, колени, локти).  
     - После идентификации точек нейросеть отключается, и данные передаются в кастомные алгоритмы.

     **Математические расчеты**:

     - Расчет углов между суставами, расстояний, скоростей, ускорений.

     **WebSocket (Flask)**:

     - Передача JSON-пакетов с координатами и метриками во фронтенд.  
     - Прием команд от фронтенда (старт/стоп, калибровка).  
3. **Визуализация (Frontend, React)**:

   **3D-модель скелета**:

   - Отражает движения человека в реальном времени.  
     - Построена на основе Three.js или аналогичной библиотеки.

     **Интерфейс аналитики**:

     - Инструменты для измерения расстояний/углов прямо поверх видео.  
     - Графики изменений метрик (скорость, амплитуда движений).

     **Адаптивная панель управления**:

     - Используется react-grid-layout для гибкого размещения виджетов.  
4. **Интеграция с оборудованием**:

   **Датчики**:

   - Самостоятельно разработанные маркеры с ИК-подсветкой для работы в условиях слабой освещенности.  
     - Пайка и настройка схемы передачи данных.

     **Синхронизация**:

     - Использование Arduino для синхронизации камер и датчиков.

---

#### **Технологии**

**Backend**: Python, Flask (REST API), WebSocket, OpenCV, TensorFlow, NumPy.  
**Frontend**: React, Three.js, react-grid-layout, Chart.js.  
**Базы данных**: SQLite (хранение сессий, калибровочных параметров).  
**Оборудование**: Raspberry Pi (управление камерами), Arduino (синхронизация), кастомные датчики.

---

#### **Ключевые особенности**

**Точность**: Погрешность трекинга ≤ 3 мм за счет субпиксельной детекции и кастомных алгоритмов.  
**Реальное время**: Задержка между движением и визуализацией \< 50 мс.  
**Адаптивность**:  
Работает при низкой освещенности (ИК-маркеры).  
Поддержка до 30+ активных датчиков.

---

#### **Технические вызовы**

1. **Синхронизация 3 видеопотоков**:  
   - Решение: использование аппаратных триггеров и программной калибровки.  
2. **Оптимизация нагрузки**:  
   - Многопоточная обработка кадров (Python \+ C++ bindings для OpenCV).  
3. **Минимизация задержек**:  
   - Сжатие JSON-пакетов, приоритизация критичных данных в WebSocket.

   ---

#### **Дальнейшее развитие**

- Внедрение ML для автоматической коррекции ошибок трекинга.  
- Разработка мобильного приложения для тренеров.